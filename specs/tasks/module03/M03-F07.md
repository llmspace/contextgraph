# Task Specification: M03-F07

```xml
<task_spec id="M03-F07" version="1.0">
<metadata>
  <title>Define InputType Enum for Model Compatibility</title>
  <status>ready</status>
  <layer>foundation</layer>
  <sequence>7</sequence>
  <implements>constitution.yaml: embeddings.model_compatibility</implements>
  <depends_on>none</depends_on>
  <estimated_hours>0.5</estimated_hours>
</metadata>

<context>
Implement InputType enum for checking which input types each model supports.
This enum is a simpler representation than ModelInput, used to describe
capabilities rather than carry data. It enables the system to route inputs
to compatible models and reject unsupported input types early.
</context>

<definition_of_done>
  <signatures>
```rust
#[derive(Debug, Clone, Copy, PartialEq, Eq, Hash)]
pub enum InputType {
    Text,
    Code,
    Image,
    Audio,
}

impl From<&ModelInput> for InputType {
    fn from(input: &ModelInput) -> Self {
        match input {
            ModelInput::Text { .. } => InputType::Text,
            ModelInput::Code { .. } => InputType::Code,
            ModelInput::Image { .. } => InputType::Image,
            ModelInput::Audio { .. } => InputType::Audio,
        }
    }
}

impl std::fmt::Display for InputType {
    fn fmt(&self, f: &mut std::fmt::Formatter<'_>) -> std::fmt::Result;
}

impl InputType {
    pub fn all() -> &'static [InputType];
}
```
  </signatures>

  <constraints>
    <constraint>Must implement Copy for efficient passing</constraint>
    <constraint>Must implement Hash for use in HashSet/HashMap</constraint>
    <constraint>Display should produce lowercase names ("text", "code", etc.)</constraint>
    <constraint>From conversion must match all ModelInput variants</constraint>
  </constraints>

  <verification>
    <check>From<&ModelInput::Text> produces InputType::Text</check>
    <check>From<&ModelInput::Code> produces InputType::Code</check>
    <check>From<&ModelInput::Image> produces InputType::Image</check>
    <check>From<&ModelInput::Audio> produces InputType::Audio</check>
    <check>Display produces correct lowercase strings</check>
    <check>all() returns slice of all 4 variants</check>
    <check>Can be used as HashMap key</check>
    <check>Can be used in HashSet</check>
  </verification>
</definition_of_done>

<files_to_create>
  <file>crates/context-graph-embeddings/src/types/input.rs</file>
</files_to_create>

<validation_criteria>
  <criterion>cargo check passes</criterion>
  <criterion>cargo test passes</criterion>
  <criterion>Derives compile correctly</criterion>
</validation_criteria>

<model_input_type_support>
| Model | Text | Code | Image | Audio |
|-------|------|------|-------|-------|
| Semantic | Yes | Yes* | No | No |
| TemporalRecent | Yes | Yes | No | No |
| TemporalPeriodic | Yes | Yes | No | No |
| TemporalPositional | Yes | Yes | No | No |
| Causal | Yes | Yes | No | No |
| Sparse | Yes | Yes* | No | No |
| Code | Yes* | Yes | No | No |
| Graph | Yes | Yes* | No | No |
| HDC | Yes | Yes | No | No |
| Multimodal | Yes | No | Yes | No |
| Entity | Yes | Yes* | No | No |
| LateInteraction | Yes | Yes* | No | No |

* Indicates the model can process this type but is not optimized for it
</model_input_type_support>
</task_spec>
```
