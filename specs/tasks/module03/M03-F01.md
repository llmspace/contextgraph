# Task Specification: M03-F01

```xml
<task_spec id="M03-F01" version="1.0">
<metadata>
  <title>Define ModelId Enum with Correct Downloaded Models</title>
  <status>ready</status>
  <layer>foundation</layer>
  <sequence>1</sequence>
  <implements>constitution.yaml: embeddings.models, models_config.toml: [models]</implements>
  <depends_on>none</depends_on>
  <estimated_hours>2</estimated_hours>
</metadata>

<context>
Implement the ModelId enum for the 12-model ensemble matching actual downloaded models.
CRITICAL: Use CORRECT model names from models_config.toml, NOT the old incorrect names.

Variants:
- Semantic (e5-large-v2, 1024D)
- TemporalRecent (custom, 512D)
- TemporalPeriodic (custom, 512D)
- TemporalPositional (custom, 512D)
- Causal (longformer, 768D)
- Sparse (splade, ~30K)
- Code (codebert, 768D)
- Graph (paraphrase-MiniLM, 384D)
- Hdc (custom, 10K-bit)
- Multimodal (clip, 768D)
- Entity (all-MiniLM, 384D)
- LateInteraction (colbert, 128D/token)

Include methods: dimension(), is_custom(), is_pretrained(), model_path(), max_tokens()
</context>

<definition_of_done>
  <signatures>
```rust
#[derive(Debug, Clone, Copy, PartialEq, Eq, Hash, Serialize, Deserialize)]
#[repr(u8)]
pub enum ModelId {
    Semantic = 0,
    TemporalRecent = 1,
    TemporalPeriodic = 2,
    TemporalPositional = 3,
    Causal = 4,
    Sparse = 5,
    Code = 6,
    Graph = 7,
    Hdc = 8,
    Multimodal = 9,
    Entity = 10,
    LateInteraction = 11,
}

impl ModelId {
    pub fn dimension(&self) -> usize;
    pub fn is_custom(&self) -> bool;
    pub fn is_pretrained(&self) -> bool;
    pub fn model_repo(&self) -> Option<&'static str>;
    pub fn model_path(&self, base_dir: &Path) -> PathBuf;
    pub fn max_tokens(&self) -> usize;
    pub fn all() -> &'static [ModelId];
}
```
  </signatures>

  <constraints>
    <constraint>Use #[repr(u8)] for compact storage</constraint>
    <constraint>Model paths must match models_config.toml exactly</constraint>
    <constraint>Temporal and HDC models return is_custom() = true</constraint>
    <constraint>dimension() must match PRD specifications</constraint>
  </constraints>

  <verification>
    <check>ModelId::all() returns 12 variants</check>
    <check>ModelId::Semantic.dimension() == 1024</check>
    <check>ModelId::TemporalRecent.is_custom() == true</check>
    <check>ModelId::Semantic.model_repo() == Some("intfloat/e5-large-v2")</check>
    <check>Serde round-trip works correctly</check>
  </verification>
</definition_of_done>

<files_to_create>
  <file>crates/context-graph-embeddings/src/types/model_id.rs</file>
</files_to_create>

<validation_criteria>
  <criterion>cargo check passes</criterion>
  <criterion>cargo test passes</criterion>
  <criterion>All 12 model variants defined</criterion>
  <criterion>Model repository mappings correct per models_config.toml</criterion>
</validation_criteria>

<model_mapping>
| Variant | HuggingFace Repo | Dimension |
|---------|------------------|-----------|
| Semantic | intfloat/e5-large-v2 | 1024D |
| TemporalRecent | CUSTOM | 512D |
| TemporalPeriodic | CUSTOM | 512D |
| TemporalPositional | CUSTOM | 512D |
| Causal | allenai/longformer-base-4096 | 768D |
| Sparse | naver/splade-cocondenser-ensembledistil | ~30K |
| Code | microsoft/codebert-base | 768D |
| Graph | sentence-transformers/paraphrase-MiniLM-L6-v2 | 384D |
| Hdc | CUSTOM | 10K-bit |
| Multimodal | openai/clip-vit-large-patch14 | 768D |
| Entity | sentence-transformers/all-MiniLM-L6-v2 | 384D |
| LateInteraction | colbert-ir/colbertv2.0 | 128D/token |
</model_mapping>
</task_spec>
```
