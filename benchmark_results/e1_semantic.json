{
  "metrics": {
    "retrieval": {
      "precision_at": {
        "1": 0.95,
        "20": 0.8654999999999997,
        "5": 0.95,
        "10": 0.928
      },
      "recall_at": {
        "20": 0.5418102478903579,
        "5": 0.1855313784949041,
        "10": 0.33610715002367514,
        "1": 0.03710627569898085
      },
      "mrr": 0.95,
      "ndcg_at": {
        "1": 0.95,
        "10": 0.9489056046804483,
        "5": 0.95,
        "20": 0.9471278684365255
      },
      "map": 0.7891998009255863,
      "query_count": 500
    },
    "topic_separation": {
      "intra_topic_similarity": 0.22477342332736575,
      "inter_topic_similarity": 0.0002944445412893519,
      "separation_ratio": 10.0,
      "silhouette_score": 0.19609753045065223,
      "boundary_f1": 0.9979381443298969,
      "num_topics": 50,
      "num_pairs_evaluated": 10091,
      "intra_distribution": [
        0.22477342332736575,
        0.029617651229089038
      ],
      "inter_distribution": [
        0.0002944445412893519,
        0.031010799653069205
      ]
    },
    "noise_robustness": {
      "mrr_degradation": [
        [
          0.0,
          0.95
        ],
        [
          0.1,
          0.95
        ],
        [
          0.2,
          0.95
        ],
        [
          0.3,
          0.95
        ]
      ],
      "precision_degradation": [],
      "robustness_threshold": null,
      "avg_relative_degradation": 0.0,
      "meets_robustness_target": true
    },
    "domain_coverage": {
      "per_domain_metrics": {
        "DataScience": {
          "precision_at": {
            "10": 0.975221238938053,
            "1": 1.0,
            "5": 1.0,
            "20": 0.9150442477876105
          },
          "recall_at": {
            "1": 0.03909767747070335,
            "5": 0.19548838735351662,
            "10": 0.3517858771090562,
            "20": 0.5666123517719844
          },
          "mrr": 1.0,
          "ndcg_at": {
            "5": 1.0,
            "10": 1.0,
            "20": 0.9999821531205464,
            "1": 1.0
          },
          "map": 0.837249517923583,
          "query_count": 113
        },
        "Documentation": {
          "precision_at": {
            "10": 0.9702702702702702,
            "5": 1.0,
            "1": 1.0,
            "20": 0.8689189189189189
          },
          "recall_at": {
            "20": 0.6737679338298226,
            "10": 0.4380423114943086,
            "5": 0.24189224111823965,
            "1": 0.048378448223647924
          },
          "mrr": 1.0,
          "ndcg_at": {
            "5": 1.0,
            "10": 1.0,
            "1": 1.0,
            "20": 0.9977214442180663
          },
          "map": 0.8611350978299666,
          "query_count": 74
        },
        "Code": {
          "precision_at": {
            "5": 1.0,
            "1": 1.0,
            "10": 0.9813186813186813,
            "20": 0.9236263736263738
          },
          "recall_at": {
            "10": 0.33311706933692997,
            "20": 0.5554547920645537,
            "1": 0.03600408877587241,
            "5": 0.18002044387936209
          },
          "mrr": 1.0,
          "ndcg_at": {
            "20": 0.9933248934653922,
            "10": 0.997081753219291,
            "1": 1.0,
            "5": 1.0
          },
          "map": 0.8094934808004906,
          "query_count": 91
        },
        "General": {
          "precision_at": {
            "1": 0.7222222222222222,
            "5": 0.7222222222222222,
            "20": 0.6283333333333333,
            "10": 0.7011111111111111
          },
          "recall_at": {
            "20": 0.4451206998402623,
            "5": 0.16626091594441855,
            "10": 0.29967350737384596,
            "1": 0.0332521831888837
          },
          "mrr": 0.7222222222222222,
          "ndcg_at": {
            "1": 0.7222222222222222,
            "20": 0.7217050991695506,
            "10": 0.7222222222222222,
            "5": 0.7222222222222222
          },
          "map": 0.5811283846872086,
          "query_count": 90
        },
        "Infrastructure": {
          "precision_at": {
            "1": 1.0,
            "10": 0.981818181818182,
            "5": 1.0,
            "20": 0.9428030303030304
          },
          "recall_at": {
            "5": 0.16234949095254025,
            "1": 0.0324698981905081,
            "20": 0.5031200911215091,
            "10": 0.29244220359567075
          },
          "mrr": 1.0,
          "ndcg_at": {
            "1": 1.0,
            "5": 1.0,
            "10": 0.9978663848277928,
            "20": 0.9953677258552568
          },
          "map": 0.8356155024493762,
          "query_count": 132
        }
      },
      "mrr_variance": 0.01234567901234568,
      "worst_domain": "General",
      "best_domain": "Infrastructure",
      "all_domains_pass": true
    },
    "composite": {
      "overall_score": 0.8788618150413261,
      "retrieval_score": 0.7908079084420084,
      "separation_score": 0.899202912955816,
      "robustness_score": 1.0,
      "coverage_score": 0.9277777777777778,
      "all_targets_met": true,
      "targets_met_count": 4,
      "targets_total": 4
    }
  },
  "ablation": {
    "e1_only_mrr": 0.95,
    "e1_e5_mrr": 0.95,
    "e1_e7_mrr": 0.9657699999999999,
    "e1_all_semantic_mrr": null,
    "full_multispace_mrr": 1.00577925,
    "e1_is_best_foundation": true,
    "enhancements": {
      "full_multispace": 5.871500000000006,
      "E7_code": 1.6599999999999948,
      "E5_causal": 0.0
    }
  },
  "per_query_type": {
    "SameTopic": {
      "precision_at": {
        "5": 1.0,
        "10": 0.9852307692307694,
        "20": 0.9384615384615387,
        "1": 1.0
      },
      "recall_at": {
        "10": 0.3792316908199258,
        "1": 0.04038470754353099,
        "20": 0.6597761040052053,
        "5": 0.2019235377176552
      },
      "mrr": 1.0,
      "ndcg_at": {
        "10": 1.0,
        "5": 1.0,
        "1": 1.0,
        "20": 1.0
      },
      "map": 1.0,
      "query_count": 325
    },
    "RelatedTopic": {
      "precision_at": {
        "10": 1.0,
        "20": 1.0,
        "1": 1.0,
        "5": 1.0
      },
      "recall_at": {
        "20": 0.08425291641198196,
        "10": 0.04212645820599098,
        "5": 0.02106322910299549,
        "1": 0.0042126458205990975
      },
      "mrr": 1.0,
      "ndcg_at": {
        "1": 1.0,
        "10": 1.0,
        "20": 1.0,
        "5": 1.0
      },
      "map": 0.21063229102995476,
      "query_count": 100
    },
    "OffTopic": {
      "precision_at": {
        "1": 0.0,
        "5": 0.0,
        "20": 0.0,
        "10": 0.0
      },
      "recall_at": {
        "1": 0.0,
        "5": 0.0,
        "20": 0.0,
        "10": 0.0
      },
      "mrr": 0.0,
      "ndcg_at": {
        "10": 0.0,
        "1": 0.0,
        "20": 0.0,
        "5": 0.0
      },
      "map": 0.0,
      "query_count": 25
    },
    "CrossDomain": {
      "precision_at": {
        "20": 0.5549999999999999,
        "5": 1.0,
        "10": 0.8759999999999999,
        "1": 1.0
      },
      "recall_at": {
        "5": 0.5006843315782946,
        "20": 0.961051970045778,
        "10": 0.8118125934952561,
        "1": 0.1001368663156589
      },
      "mrr": 1.0,
      "ndcg_at": {
        "20": 0.9712786843652554,
        "10": 0.9890560468044823,
        "5": 1.0,
        "1": 1.0
      },
      "map": 0.970733427195959,
      "query_count": 50
    }
  },
  "timings": {
    "total_ms": 8269,
    "retrieval_ms": 874,
    "separation_ms": 2146,
    "noise_robustness_ms": 2622,
    "domain_analysis_ms": 878,
    "ablation_ms": 871
  },
  "config": {
    "k_values": [
      1,
      5,
      10,
      20
    ],
    "noise_levels": [
      0.0,
      0.1,
      0.2,
      0.3
    ],
    "run_ablation": true,
    "run_domain_analysis": true,
    "num_separation_pairs": 5000,
    "seed": 42,
    "show_progress": true
  },
  "dataset_stats": {
    "num_documents": 1206,
    "num_queries": 500,
    "num_topics": 50,
    "num_domains": 5,
    "num_docs_with_embeddings": 1206,
    "embedding_dimension": 1024
  },
  "validation": {
    "all_passed": true,
    "checks_passed": 3,
    "checks_total": 3,
    "checks": [
      {
        "description": "MRR >= 0.70",
        "expected": ">= 0.70",
        "actual": "0.950",
        "passed": true
      },
      {
        "description": "P@10 >= 0.60",
        "expected": ">= 0.60",
        "actual": "0.928",
        "passed": true
      },
      {
        "description": "MRR >= 0.55 at 0.2 noise",
        "expected": ">= 0.55",
        "actual": "0.950",
        "passed": true
      }
    ]
  }
}